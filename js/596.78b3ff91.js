"use strict";(self["webpackChunknetflixkekw"]=self["webpackChunknetflixkekw"]||[]).push([[596],{2484:function(r,e,t){t.d(e,{A:function(){return l}});var n=t(6768),o=t(4232);const i={class:"wrapper__input"},s=["placeholder"],a={class:"input__error"};function c(r,e,t,c,u,p){return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("input",{type:"text",class:"input",placeholder:t.textForPlaceholder,onInput:e[0]||(e[0]=e=>r.$emit("returnValue",e.target.value))},null,40,s),(0,n.Lk)("div",a,(0,o.v_)(t.error),1)])}var u={data(){return{}},props:["textForPlaceholder","error"]},p=t(1241);const f=(0,p.A)(u,[["render",c],["__scopeId","data-v-a976c2ac"]]);var l=f},3596:function(r,e,t){t.r(e),t.d(e,{default:function(){return m}});var n=t(6768);const o={class:"wrapper"},i={class:"wrapper__forms"},s={key:0,class:"wrapper__logIn"},a={key:1,class:"wrapper__signIn"};function c(r,e,t,c,u,p){const f=(0,n.g2)("router-link"),l=(0,n.g2)("inputComponent"),h=(0,n.g2)("passwordComponent");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(f,{to:"/",class:"wrapper__back btn"},{default:(0,n.k6)((()=>e[14]||(e[14]=[(0,n.eW)("Вернуться")]))),_:1}),(0,n.Lk)("div",i,["enter"==this.section?((0,n.uX)(),(0,n.CE)("div",s,[e[15]||(e[15]=(0,n.Lk)("h2",{class:"wrapper__logIn-title"},"Войти в аккаунт",-1)),(0,n.bF)(l,{error:this.errors.errorLogin,textForPlaceholder:"Логин",class:"wrapper__input-form",onReturnValue:e[0]||(e[0]=r=>this.Login=r),onKeypress:e[1]||(e[1]=r=>p.clickOnEnterIn(r.key))},null,8,["error"]),(0,n.bF)(h,{error:this.errors.errorPassword,textForPlaceholder:"Пароль",class:"wrapper__input-form",onReturnValue:e[2]||(e[2]=r=>p.hashForPassword(r)),onKeypress:e[3]||(e[3]=r=>p.clickOnEnterIn(r.key))},null,8,["error"]),(0,n.Lk)("div",{class:"btn btn__signIn",onClick:e[4]||(e[4]=(...r)=>p.signInUser&&p.signInUser(...r))},"Войти"),(0,n.Lk)("div",{class:"btn__logIn",onClick:e[5]||(e[5]=r=>this.section="create")},"Создать аккаунт")])):((0,n.uX)(),(0,n.CE)("div",a,[e[16]||(e[16]=(0,n.Lk)("h2",{class:"wrapper__logIn-title"},"Зарегистрируйте аккаунт",-1)),(0,n.bF)(l,{error:this.errors.errorName,textForPlaceholder:"Имя",class:"wrapper__input-form",onReturnValue:e[6]||(e[6]=r=>this.Username=r),onKeypress:e[7]||(e[7]=r=>p.clickOnEnterReg(r.key))},null,8,["error"]),(0,n.bF)(l,{error:this.errors.errorLogin,textForPlaceholder:"Логин",class:"wrapper__input-form",onReturnValue:e[8]||(e[8]=r=>this.Login=r),onKeypress:e[9]||(e[9]=r=>p.clickOnEnterReg(r.key))},null,8,["error"]),(0,n.bF)(h,{error:this.errors.errorPassword,textForPlaceholder:"Пароль",class:"wrapper__input-form",onReturnValue:e[10]||(e[10]=r=>p.hashForPassword(r)),onKeypress:e[11]||(e[11]=r=>p.clickOnEnterReg(r.key))},null,8,["error"]),(0,n.Lk)("div",{class:"btn btn__signIn",onClick:e[12]||(e[12]=(...r)=>p.registerUser&&p.registerUser(...r))},"Зарегистрироваться "),(0,n.Lk)("div",{class:"btn__logIn",onClick:e[13]||(e[13]=r=>this.section="enter")},"Войти в аккаунт")]))])])}t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(1454);var u=t(2484),p=t(4232);const f={class:"wrapper__input"},l=["type","placeholder"],h=["src"],y={class:"input__error"};function d(r,e,o,i,s,a){return(0,n.uX)(),(0,n.CE)("div",f,[(0,n.Lk)("input",{type:this.isClick?"text":"password",class:"input",placeholder:o.textForPlaceholder,onInput:e[0]||(e[0]=e=>r.$emit("returnValue",e.target.value))},null,40,l),(0,n.Lk)("img",{class:"input__eye-btn",src:this.isClick?t(2710):t(6226),onMouseup:e[1]||(e[1]=r=>this.isClick=!1),onMousedown:e[2]||(e[2]=r=>this.isClick=!0)},null,40,h),(0,n.Lk)("div",y,(0,p.v_)(o.error),1)])}var g={data(){return{isClick:!1}},props:["textForPlaceholder","error"]},w=t(1241);const v=(0,w.A)(g,[["render",d],["__scopeId","data-v-2208d4fc"]]);var _=v,A={data(){return{section:"enter",Username:"",Login:"",hashPassword:"",error:"",errors:{errorName:"",errorLogin:"",errorPassword:""}}},components:{inputComponent:u.A,passwordComponent:_},methods:{clickOnEnterReg(r){"Enter"==r&&this.registerUser()},clickOnEnterIn(r){"Enter"==r&&this.signInUser()},async fillLocalStorage(r){console.log(r),localStorage.setItem("user",JSON.stringify({name:r.name,login:r.login,role:r.role})),window.location="/Zetflix/"},async hashForPassword(r){this.hashPassword=await this.hashing(r)},async hashing(r){const e=r,t=new TextEncoder,n=t.encode(e),o=await crypto.subtle.digest("SHA-256",n),i=Array.from(new Uint8Array(o)),s=i.map((r=>r.toString(16).padStart(2,"0"))).join("");return s},async registerUser(){if(""==this.Username)this.errors.errorName="Укажи имя хуила)";else if(""==this.Login)this.errors.errorName="",this.errors.errorLogin="Укажи логин хуила)";else if(""==this.password)this.errors.errorName="",this.errors.errorLogin="",this.errors.errorPassword="Укажи пароль хуила)";else{this.errors.errorName="",this.errors.errorLogin="",this.errors.errorPassword="";try{let e=await fetch(`https://1d95bdc879b5963a.mokky.dev/users?login=${this.Login}`),t=await e.json();if(0!=t.length)this.errors.errorLogin="Такой логин уже есть";else try{await fetch("https://1d95bdc879b5963a.mokky.dev/users",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({name:this.Username,login:this.Login,password:this.hashPassword,role:"Зритель"})}),this.fillLocalStorage({name:this.Username,login:this.Login,role:"Зритель"})}catch(r){console.log(r)}}catch(r){console.log(r)}}},async signInUser(){if(""==this.Login)this.errors.errorLogin="Укажи логин сука)";else if(""==this.password)this.errors.errorLogin="",this.errors.errorPassword="Укажи пароль сука)";else{this.errors.errorLogin="",this.errors.errorPassword="";try{let r=await fetch(`https://1d95bdc879b5963a.mokky.dev/users?login=${this.Login}&password=${this.hashPassword}`),e=await r.json();0!=e.length?this.fillLocalStorage({name:e[0].name,login:e[0].login,role:e[0].role}):this.errors.errorLogin="Такого пользователя нет"}catch(r){console.log(r)}}}}};const k=(0,w.A)(A,[["render",c],["__scopeId","data-v-6628ef68"]]);var m=k},6226:function(r,e,t){r.exports=t.p+"img/closed-eye.8caf3a33.svg"},2710:function(r,e,t){r.exports=t.p+"img/open-eye.22db9f44.svg"},3506:function(r,e,t){var n=t(3925),o=String,i=TypeError;r.exports=function(r){if(n(r))return r;throw new i("Can't set "+o(r)+" as a prototype")}},7811:function(r){r.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7394:function(r,e,t){var n=t(4576),o=t(6706),i=t(2195),s=n.ArrayBuffer,a=n.TypeError;r.exports=s&&o(s.prototype,"byteLength","get")||function(r){if("ArrayBuffer"!==i(r))throw new a("ArrayBuffer expected");return r.byteLength}},3238:function(r,e,t){var n=t(4576),o=t(7476),i=t(7394),s=n.ArrayBuffer,a=s&&s.prototype,c=a&&o(a.slice);r.exports=function(r){if(0!==i(r))return!1;if(!c)return!1;try{return c(r,0,0),!1}catch(e){return!0}}},5169:function(r,e,t){var n=t(3238),o=TypeError;r.exports=function(r){if(n(r))throw new o("ArrayBuffer is detached");return r}},5636:function(r,e,t){var n=t(4576),o=t(9504),i=t(6706),s=t(7696),a=t(5169),c=t(7394),u=t(4483),p=t(1548),f=n.structuredClone,l=n.ArrayBuffer,h=n.DataView,y=Math.min,d=l.prototype,g=h.prototype,w=o(d.slice),v=i(d,"resizable","get"),_=i(d,"maxByteLength","get"),A=o(g.getInt8),k=o(g.setInt8);r.exports=(p||u)&&function(r,e,t){var n,o=c(r),i=void 0===e?o:s(e),d=!v||!v(r);if(a(r),p&&(r=f(r,{transfer:[r]}),o===i&&(t||d)))return r;if(o>=i&&(!t||d))n=w(r,0,i);else{var g=t&&!d&&_?{maxByteLength:_(r)}:void 0;n=new l(i,g);for(var m=new h(r),x=new h(n),L=y(i,o),b=0;b<L;b++)k(x,b,A(m,b))}return p||u(r),n}},4644:function(r,e,t){var n,o,i,s=t(7811),a=t(3724),c=t(4576),u=t(4901),p=t(34),f=t(9297),l=t(6955),h=t(6823),y=t(6699),d=t(6840),g=t(2106),w=t(1625),v=t(2787),_=t(2967),A=t(8227),k=t(3392),m=t(1181),x=m.enforce,L=m.get,b=c.Int8Array,C=b&&b.prototype,E=c.Uint8ClampedArray,T=E&&E.prototype,I=b&&v(b),P=C&&v(C),B=Object.prototype,F=c.TypeError,O=A("toStringTag"),R=k("TYPED_ARRAY_TAG"),U="TypedArrayConstructor",N=s&&!!_&&"Opera"!==l(c.opera),S=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},V={BigInt64Array:8,BigUint64Array:8},M=function(r){if(!p(r))return!1;var e=l(r);return"DataView"===e||f(D,e)||f(V,e)},j=function(r){var e=v(r);if(p(e)){var t=L(e);return t&&f(t,U)?t[U]:j(e)}},W=function(r){if(!p(r))return!1;var e=l(r);return f(D,e)||f(V,e)},K=function(r){if(W(r))return r;throw new F("Target is not a typed array")},X=function(r){if(u(r)&&(!_||w(I,r)))return r;throw new F(h(r)+" is not a typed array constructor")},Y=function(r,e,t,n){if(a){if(t)for(var o in D){var i=c[o];if(i&&f(i.prototype,r))try{delete i.prototype[r]}catch(s){try{i.prototype[r]=e}catch(u){}}}P[r]&&!t||d(P,r,t?e:N&&C[r]||e,n)}},$=function(r,e,t){var n,o;if(a){if(_){if(t)for(n in D)if(o=c[n],o&&f(o,r))try{delete o[r]}catch(i){}if(I[r]&&!t)return;try{return d(I,r,t?e:N&&I[r]||e)}catch(i){}}for(n in D)o=c[n],!o||o[r]&&!t||d(o,r,e)}};for(n in D)o=c[n],i=o&&o.prototype,i?x(i)[U]=o:N=!1;for(n in V)o=c[n],i=o&&o.prototype,i&&(x(i)[U]=o);if((!N||!u(I)||I===Function.prototype)&&(I=function(){throw new F("Incorrect invocation")},N))for(n in D)c[n]&&_(c[n],I);if((!N||!P||P===B)&&(P=I.prototype,N))for(n in D)c[n]&&_(c[n].prototype,P);if(N&&v(T)!==P&&_(T,P),a&&!f(P,O))for(n in S=!0,g(P,O,{configurable:!0,get:function(){return p(this)?this[R]:void 0}}),D)c[n]&&y(c[n],R,n);r.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:S&&R,aTypedArray:K,aTypedArrayConstructor:X,exportTypedArrayMethod:Y,exportTypedArrayStaticMethod:$,getTypedArrayConstructor:j,isView:M,isTypedArray:W,TypedArray:I,TypedArrayPrototype:P}},9928:function(r,e,t){var n=t(6198),o=t(1291),i=RangeError;r.exports=function(r,e,t,s){var a=n(r),c=o(t),u=c<0?a+c:c;if(u>=a||u<0)throw new i("Incorrect index");for(var p=new e(a),f=0;f<a;f++)p[f]=f===u?s:r[f];return p}},4483:function(r,e,t){var n,o,i,s,a=t(4576),c=t(9429),u=t(1548),p=a.structuredClone,f=a.ArrayBuffer,l=a.MessageChannel,h=!1;if(u)h=function(r){p(r,{transfer:[r]})};else if(f)try{l||(n=c("worker_threads"),n&&(l=n.MessageChannel)),l&&(o=new l,i=new f(2),s=function(r){o.port1.postMessage(null,[r])},2===i.byteLength&&(s(i),0===i.byteLength&&(h=s)))}catch(y){}r.exports=h},6193:function(r,e,t){var n=t(4215);r.exports="NODE"===n},4215:function(r,e,t){var n=t(4576),o=t(2839),i=t(2195),s=function(r){return o.slice(0,r.length)===r};r.exports=function(){return s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"}()},9429:function(r,e,t){var n=t(4576),o=t(6193);r.exports=function(r){if(o){try{return n.process.getBuiltinModule(r)}catch(e){}try{return Function('return require("'+r+'")')()}catch(e){}}}},1108:function(r,e,t){var n=t(6955);r.exports=function(r){var e=n(r);return"BigInt64Array"===e||"BigUint64Array"===e}},3925:function(r,e,t){var n=t(34);r.exports=function(r){return n(r)||null===r}},2967:function(r,e,t){var n=t(6706),o=t(34),i=t(7750),s=t(3506);r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,e=!1,t={};try{r=n(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(a){}return function(t,n){return i(t),s(n),o(t)?(e?r(t,n):t.__proto__=n,t):t}}():void 0)},1548:function(r,e,t){var n=t(4576),o=t(9039),i=t(9519),s=t(4215),a=n.structuredClone;r.exports=!!a&&!o((function(){if("DENO"===s&&i>92||"NODE"===s&&i>94||"BROWSER"===s&&i>97)return!1;var r=new ArrayBuffer(8),e=a(r,{transfer:[r]});return 0!==r.byteLength||8!==e.byteLength}))},5854:function(r,e,t){var n=t(2777),o=TypeError;r.exports=function(r){var e=n(r,"number");if("number"==typeof e)throw new o("Can't convert number to bigint");return BigInt(e)}},7696:function(r,e,t){var n=t(1291),o=t(8014),i=RangeError;r.exports=function(r){if(void 0===r)return 0;var e=n(r),t=o(e);if(e!==t)throw new i("Wrong length or index");return t}},6573:function(r,e,t){var n=t(3724),o=t(2106),i=t(3238),s=ArrayBuffer.prototype;n&&!("detached"in s)&&o(s,"detached",{configurable:!0,get:function(){return i(this)}})},7936:function(r,e,t){var n=t(6518),o=t(5636);o&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return o(this,arguments.length?arguments[0]:void 0,!1)}})},8100:function(r,e,t){var n=t(6518),o=t(5636);o&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return o(this,arguments.length?arguments[0]:void 0,!0)}})},7467:function(r,e,t){var n=t(7628),o=t(4644),i=o.aTypedArray,s=o.exportTypedArrayMethod,a=o.getTypedArrayConstructor;s("toReversed",(function(){return n(i(this),a(this))}))},4732:function(r,e,t){var n=t(4644),o=t(9504),i=t(9306),s=t(5370),a=n.aTypedArray,c=n.getTypedArrayConstructor,u=n.exportTypedArrayMethod,p=o(n.TypedArrayPrototype.sort);u("toSorted",(function(r){void 0!==r&&i(r);var e=a(this),t=s(c(e),e);return p(t,r)}))},9577:function(r,e,t){var n=t(9928),o=t(4644),i=t(1108),s=t(1291),a=t(5854),c=o.aTypedArray,u=o.getTypedArrayConstructor,p=o.exportTypedArrayMethod,f=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(r){return 8===r}}();p("with",{with:function(r,e){var t=c(this),o=s(r),p=i(t)?a(e):+e;return n(t,u(t),o,p)}}["with"],!f)}}]);
//# sourceMappingURL=596.78b3ff91.js.map