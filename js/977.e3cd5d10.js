"use strict";(self["webpackChunknetflixkekw"]=self["webpackChunknetflixkekw"]||[]).push([[977],{9863:function(e,t,s){s.d(t,{A:function(){return T}});var i=s(6768);const a={class:"root"},l={class:"header"},n={class:"container header__wrapper"},r={key:0,class:"header__authorize"};function o(e,t,s,o,c,d){const p=(0,i.g2)("PopupBlock"),m=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",a,[c.isPopUpClosed?((0,i.uX)(),(0,i.Wv)(p,{key:0,onCloseByWrapper:t[0]||(t[0]=e=>{c.isPopUpClosed=e}),onClosePopUp:t[1]||(t[1]=e=>{c.isPopUpClosed=e})})):(0,i.Q3)("",!0),(0,i.Lk)("header",l,[(0,i.Lk)("div",n,[t[5]||(t[5]=(0,i.Lk)("a",{href:"/Zetflix/",class:"header__title"},[(0,i.Lk)("span",{class:"bigLogo"},"NETFLIX"),(0,i.Lk)("br"),(0,i.eW)("and chill")],-1)),this.userAuthorize?((0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("div",{onClick:t[2]||(t[2]=e=>c.isPopUpClosed=!0),class:"btn"},"Добавить фильмец"),(0,i.bF)(m,{to:"/login-form",onClick:d.clearLocalStorage,class:"btn"},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.eW)("Выйти")]))),_:1},8,["onClick"])])):((0,i.uX)(),(0,i.Wv)(m,{key:1,to:"/login-form",class:"header__enter btn"},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.eW)("Войти")]))),_:1}))])])])}var c=s(4232),d=s.p+"img/search-svg.9cdd2e0b.svg";const p={class:"popup"},m={class:"popup__top"},u={key:0,class:"popup__attention"},_={key:1,class:"popup__films"},f={class:"popup__films-columns"},h={key:0,class:"popup__films-context"},k={class:"popup__films-content"},v=["src"],F={class:"popup__film-texts"},g={class:"popup__context-title"},C={class:"popup__context-year"},y={class:"popup__context-genres"},L={class:"popup__context-description"};function b(e,t,s,a,l,n){const r=(0,i.g2)("inputComponent"),o=(0,i.g2)("addMovieCard");return(0,i.uX)(),(0,i.CE)("div",{class:"popup__wrapper",onClick:t[5]||(t[5]=t=>e.$emit("CloseByWrapper",n.wrapperCheck(t)))},[(0,i.Lk)("div",p,[(0,i.Lk)("div",{class:"popup__close",onClick:t[0]||(t[0]=t=>e.$emit("ClosePopUp",!1))},"Х"),t[7]||(t[7]=(0,i.Lk)("h2",{class:"popup__title"},"Впиши название фильма ",-1)),(0,i.Lk)("div",m,[(0,i.bF)(r,{class:"popup__input",onKeypress:t[1]||(t[1]=e=>n.checkKeyPress(e.key)),onReturnValue:t[2]||(t[2]=e=>this.filmName=e),textForPlaceholder:"Название фильма",error:this.errorText},null,8,["error"]),(0,i.Lk)("div",{class:"popup__btn",onClick:t[3]||(t[3]=e=>n.findFilm())},t[6]||(t[6]=[(0,i.Lk)("img",{src:d,alt:"",class:"popup__btn-img"},null,-1)]))]),0==this.listOfFindedFilms.length?((0,i.uX)(),(0,i.CE)("div",u,"Данная параша работает по бесплатному API ключу, потому что маленькая инди компания Yandex не может позволить себе больше 200 бесплатных запросов(Привет ютубу, где я делал по 1000+ в день).Так что динамического поиска тут нет, просьба писать название фильма без ошибок на всякий пожарный =)")):((0,i.uX)(),(0,i.CE)("div",_,[(0,i.Lk)("div",f,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(this.listOfFindedFilms.docs,((e,t)=>((0,i.uX)(),(0,i.Wv)(o,{onCheckFilm:e=>{this.indexOfFilms=e,this.isClicked=!0},key:t,name:e.name,index:t,desc:e.description,year:e.year},null,8,["onCheckFilm","name","index","desc","year"])))),128))]),l.isClicked?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("div",k,[(0,i.Lk)("img",{src:this.listOfFindedFilms.docs[l.indexOfFilms].poster.previewUrl,alt:"Картинка для фильма",class:"popup__content-img"},null,8,v),(0,i.Lk)("div",F,[(0,i.Lk)("div",g,(0,c.v_)(this.listOfFindedFilms.docs[l.indexOfFilms].name),1),(0,i.Lk)("div",C,(0,c.v_)(this.listOfFindedFilms.docs[l.indexOfFilms].year)+" - года ",1),(0,i.Lk)("div",y,"Жанры: "+(0,c.v_)(n.makeGenres()),1),(0,i.Lk)("div",L,(0,c.v_)(this.listOfFindedFilms.docs[l.indexOfFilms].description),1)])]),(0,i.Lk)("div",{class:"popup__context-btn btn",onClick:t[4]||(t[4]=e=>n.addNewFilm())},"Добавить")])):(0,i.Q3)("",!0)]))])])}const x={class:"film__content"},O={class:"film__title"};function w(e,t,s,a,l,n){return(0,i.uX)(),(0,i.CE)("div",{class:"wrapper__film",onClick:t[0]||(t[0]=t=>e.$emit("checkFilm",this.index))},[(0,i.Lk)("div",x,[(0,i.Lk)("div",O,(0,c.v_)(this.name)+" - "+(0,c.v_)(this.year)+" года",1)])])}var P={data(){return{}},props:["index","name","desc","year"]},X=s(1241);const S=(0,X.A)(P,[["render",w],["__scopeId","data-v-7e13947d"]]);var I=S,N=s(2484),E=s(5064),A={data(){return{indexOfFilms:0,isClicked:!1,filmName:"",errorText:"",listOfFindedFilms:[],films:[]}},components:{inputComponent:N.A,addMovieCard:I},methods:{wrapperCheck(e){return!e.target.classList.contains("popup__wrapper")||(console.log(e.target),!1)},async findFilm(){if(""==this.filmName)this.errorText="Название фильма напиши даун)";else try{this.errorText="";let e=await fetch(`https://api.kinopoisk.dev/v1.4/movie/search?page=1&limit=10&query=${this.filmName}`,{method:"GET",headers:{accept:"application/json","X-API-KEY":"0ZGKZ63-NXGMT2M-K6VBGQZ-4Y50733"}});this.listOfFindedFilms=await e.json()}catch(e){console.log(e)}},checkKeyPress(e){console.log(),"Enter"==e&&this.findFilm()},async addNewFilm(){try{await fetch("https://1d95bdc879b5963a.mokky.dev/films",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({filmName:this.listOfFindedFilms.docs[this.indexOfFilms].name,year:this.listOfFindedFilms.docs[this.indexOfFilms].year,imgPath:this.listOfFindedFilms.docs[this.indexOfFilms].poster.previewUrl,whoSendIt:JSON.parse(localStorage.getItem("user")).name,status:"Предложенные"})}),this.films=(0,E.H)(),this.films.getFilms()}catch(e){console.log(e)}},makeGenres(){let e="";for(let t in this.listOfFindedFilms.docs[this.indexOfFilms].genres)e+=` ${this.listOfFindedFilms.docs[this.indexOfFilms].genres[t].name},`;return e.substring(0,e.length-1)}}};const W=(0,X.A)(A,[["render",b],["__scopeId","data-v-794c3ed8"]]);var j=W,B={components:{PopupBlock:j},data(){return{userData:{},userAuthorize:!1,isPopUpClosed:!1}},created(){localStorage.getItem("user")&&(this.userAuthorize=!0,this.userData=JSON.parse(localStorage.getItem("user")))},methods:{clearLocalStorage(){localStorage.removeItem("user")}}};const R=(0,X.A)(B,[["render",o],["__scopeId","data-v-1836e288"]]);var T=R},2484:function(e,t,s){s.d(t,{A:function(){return m}});var i=s(6768),a=s(4232);const l={class:"wrapper__input"},n=["placeholder"],r={class:"input__error"};function o(e,t,s,o,c,d){return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("input",{type:"text",class:"input",placeholder:s.textForPlaceholder,onInput:t[0]||(t[0]=t=>e.$emit("returnValue",t.target.value))},null,40,n),(0,i.Lk)("div",r,(0,a.v_)(s.error),1)])}var c={data(){return{}},props:["textForPlaceholder","error"]},d=s(1241);const p=(0,d.A)(c,[["render",o],["__scopeId","data-v-a976c2ac"]]);var m=p},9531:function(e,t,s){s.r(t),s.d(t,{default:function(){return S}});var i=s(6768);const a={class:"root"};function l(e,t,s,l,n,r){const o=(0,i.g2)("headerBlock"),c=(0,i.g2)("contentBlock");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(o),(0,i.bF)(c)])}var n=s(9863),r=s(4232);const o={class:"content__wrapper"},c={class:"container"},d={class:"content__top"},p={class:"content__bottom"},m={class:"content__bottom-movies"};function u(e,t,s,a,l,n){const u=(0,i.g2)("movieCard");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.Lk)("div",c,[(0,i.Lk)("div",d,[(0,i.Lk)("div",{class:"btn content__btn",onClick:t[0]||(t[0]=e=>n.filterFilms("Просмотрено"))},"Просмотренные"),(0,i.Lk)("div",{class:"btn content__btn",onClick:t[1]||(t[1]=e=>n.filterFilms("В очереди"))}," В очереди "),(0,i.Lk)("div",{class:"btn content__btn",onClick:t[2]||(t[2]=e=>n.filterFilms("Предложенные"))}," Предложенные ")]),(0,i.Lk)("div",p,[(0,i.Lk)("div",m,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(this.films.setFilms,((e,t)=>((0,i.uX)(),(0,i.Wv)(u,{class:"film",key:t,id:e.id,"film-name":e.filmName,"img-path":e.imgPath,Status:e.status,"obj-rate":e.ranks,Year:e.year},{default:(0,i.k6)((()=>[(0,i.eW)((0,r.v_)(e.desc),1)])),_:2},1032,["id","film-name","img-path","Status","obj-rate","Year"])))),128))])])])])}var _=s(5064);const f={class:"card__wrapper"},h=["src"],k={class:"card__filmName"},v={class:"card__year",style:{"font-size":"14px"}},F={class:"card__filmStatus"};function g(e,t,s,a,l,n){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.Wv)(o,{to:"/film_"+s.id,class:"card__link"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",f,[(0,i.Lk)("img",{loading:"lazy",src:s.imgPath,alt:"filmImg",class:"card__img"},null,8,h),(0,i.Lk)("div",k,[(0,i.eW)((0,r.v_)(s.filmName)+" ",1),t[0]||(t[0]=(0,i.Lk)("br",null,null,-1)),t[1]||(t[1]=(0,i.eW)()),(0,i.Lk)("span",v,(0,r.v_)(s.Year)+" года",1)]),(0,i.Lk)("div",F,(0,r.v_)(s.Status),1),this.objRate?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,r.C4)(["card__rate",n.dynamicClass])},(0,r.v_)(n.caclulateRate()),3)):(0,i.Q3)("",!0)])])),_:1},8,["to"])}var C={data(){return{}},props:{id:{type:Number},filmName:{type:String},imgPath:{type:String},Year:{type:Number,default:0},Status:{type:String},objRate:{type:Object,default:()=>{}}},methods:{caclulateRate(){let e=0,t=0;for(let s in this.objRate)e+=this.objRate[s],t++;return(e/t).toFixed(1)}},computed:{dynamicClass(){let e=this.caclulateRate();return e<=4?"red":e<=7?"yellow":"green"}},created(){this.caclulateRate()}},y=s(1241);const L=(0,y.A)(C,[["render",g],["__scopeId","data-v-6dcbadfa"]]);var b=L,x={components:{movieCard:b},data(){return{films:[]}},methods:{filterFilms(e){this.films.getFiltredFilms(e)}},created(){this.films=(0,_.H)()}};const O=(0,y.A)(x,[["render",u],["__scopeId","data-v-58598bb2"]]);var w=O,P={data(){return{}},created(){this.listOfFilms=(0,_.H)(),this.listOfFilms.getFilms()},components:{headerBlock:n.A,contentBlock:w}};const X=(0,y.A)(P,[["render",l]]);var S=X}}]);
//# sourceMappingURL=977.e3cd5d10.js.map